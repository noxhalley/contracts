name: Dispatch on push

on:
  push:
    tags:
      - 'v*.*.*'

jobs:
  dispatch-multi:
    runs-on: ubuntuâ€‘latest  
    strategy:
      matrix:
        repo:
          - noxhalley/contracts-go
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - uses: peter-evans/repository-dispatch@v3
        with:
          token: ${{ secrets.K2_PAT }}
          repository: ${{ matrix.repo }}
          event-type: proto-schema-updated
          client-payload: |
            {
              "ref": "${{ github.ref }}",
              "sha": "${{ github.sha }}"
              "version": "${{ github.ref_name }}"
            }
